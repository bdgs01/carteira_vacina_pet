<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carteira Pet - Cuidado Digital</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'health-green': {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d'
                        },
                        'trust-blue': {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a'
                        },
                        'accent-purple': {
                            50: '#faf5ff',
                            100: '#f3e8ff',
                            200: '#e9d5ff',
                            300: '#d8b4fe',
                            400: '#c084fc',
                            500: '#a855f7',
                            600: '#9333ea',
                            700: '#7c3aed',
                            800: '#6b21a8',
                            900: '#581c87'
                        },
                        'attention-orange': {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12'
                        }
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-subtle': 'pulse-subtle 2s infinite',
                        'shimmer': 'shimmer 1.5s infinite',
                        'slide-up': 'slide-up 0.5s ease-out',
                        'breathe': 'breathe 2s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        'pulse-subtle': {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.8' }
                        },
                        shimmer: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' }
                        },
                        'slide-up': {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        breathe: {
                            '0%, 100%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.05)' }
                        }
                    }
                }
            }
        }
    </script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0fdf4 0%, #eff6ff 25%, #faf5ff 50%, #fff7ed 75%, #f0fdf4 100%);
            min-height: 100vh;
        }

        /* Premium Card Styles */
        .premium-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .premium-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
            border-color: rgba(34, 197, 94, 0.2);
        }

        /* Mobile optimized hover - only for desktop */
        @media (hover: hover) {
            .premium-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
            }
        }

        /* Premium Button Styles */
        .btn-premium {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            min-height: 48px; /* Touch-friendly minimum */
        }

        .btn-premium:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-premium:hover:before {
            left: 100%;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);
        }

        /* Mobile button optimization */
        @media (max-width: 768px) {
            .btn-premium {
                min-height: 52px;
                font-size: 1rem;
            }
            .btn-premium:hover {
                transform: none;
            }
        }

        /* Input Premium Styles */
        .input-premium {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(229, 231, 235, 0.6);
            border-radius: 16px;
            padding: 16px 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-height: 48px; /* Touch-friendly */
        }

        .input-premium:focus {
            outline: none;
            border-color: #22c55e;
            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.1);
        }

        /* Mobile input optimization */
        @media (max-width: 768px) {
            .input-premium {
                padding: 18px 20px;
                font-size: 16px; /* Prevents zoom on iOS */
                min-height: 52px;
            }
            .input-premium:focus {
                transform: none;
            }
        }

        /* Dog Emoji Avatar Placeholder */
        .avatar-placeholder {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #86efac 0%, #22c55e 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            font-size: 3.5rem;
            border: 4px solid white;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .avatar-placeholder.breathe {
            animation: breathe 2s ease-in-out infinite;
        }

        /* Mobile avatar optimization */
        @media (max-width: 768px) {
            .avatar-placeholder {
                width: 100px;
                height: 100px;
                font-size: 3rem;
            }
        }

        /* Status Badges Premium */
        .status-complete {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
            border: 1px solid #86efac;
        }

        .status-pending {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            color: #9a3412;
            border: 1px solid #fb923c;
        }

        .status-future {
            background: linear-gradient(135deg, #eff6ff 0%, #bfdbfe 100%);
            color: #1e40af;
            border: 1px solid #60a5fa;
        }

        .status-waiting {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: #475569;
            border: 1px solid #cbd5e1;
        }

        /* Progress Bar Premium */
        .progress-premium {
            height: 12px;
            background: rgba(229, 231, 235, 0.3);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-premium::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
            border-radius: 6px;
            transition: width 0.8s ease;
        }

        /* Tab Styles Premium */
        .tab-premium {
            padding: 12px 20px;
            font-weight: 600;
            border-radius: 12px 12px 0 0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tab-premium.active {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(22, 163, 74, 0.1) 100%);
            color: #166534;
        }

        .tab-premium.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
        }

        /* Mobile tab optimization */
        @media (max-width: 768px) {
            .tab-premium {
                flex: 1;
                font-size: 14px;
                padding: 16px 12px;
            }
        }

        /* Vaccine Card Premium */
        .vaccine-card {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(229, 231, 235, 0.4);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 80px;
        }

        .vaccine-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .vaccine-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
        }

        /* Mobile vaccine card optimization */
        @media (max-width: 768px) {
            .vaccine-card {
                padding: 16px;
                margin-bottom: 12px;
            }
            .vaccine-card:hover {
                transform: none;
            }
        }

        /* Checkbox Premium */
        .checkbox-premium {
            width: 28px;
            height: 28px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            flex-shrink: 0;
        }

        .checkbox-premium.checked {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-color: #16a34a;
        }

        .checkbox-premium.checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 16px;
        }

        /* Mobile checkbox optimization */
        @media (max-width: 768px) {
            .checkbox-premium {
                width: 32px;
                height: 32px;
            }
            .checkbox-premium.checked::after {
                font-size: 18px;
            }
        }

        /* Shimmer Loading */
        .shimmer {
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Tab Content */
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Mobile-First Responsive Design */
        @media (max-width: 640px) {
            .container {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            .premium-card {
                margin: 0;
                border-radius: 20px;
            }
            
            .vaccine-card {
                border-radius: 12px;
            }
            
            /* Stack elements vertically on mobile */
            .mobile-stack {
                flex-direction: column !important;
            }
            
            .mobile-full-width {
                width: 100% !important;
            }
            
            /* Better spacing for mobile */
            .mobile-spacing {
                margin-bottom: 16px;
            }
            
            /* Hide decorative elements on mobile */
            .mobile-hide {
                display: none !important;
            }
        }

        /* Enhanced mobile touch targets */
        @media (max-width: 768px) {
            button, input, select, .clickable {
                min-height: 48px;
            }
            
            .status-badge {
                padding: 8px 12px;
                font-size: 12px;
            }
        }

        /* Portrait phone optimization */
        @media (max-width: 480px) {
            .premium-card {
                margin: 8px;
                padding: 16px;
                border-radius: 16px;
            }
            
            .vaccine-card {
                padding: 12px;
            }
            
            .avatar-placeholder {
                width: 80px;
                height: 80px;
                font-size: 2.5rem;
            }
            
            .tab-premium {
                font-size: 13px;
                padding: 12px 8px;
            }
        }
    </style>
</head>

<body class="text-slate-800 antialiased">
    <!-- Setup Screen -->
    <div id="setup-screen" class="hidden min-h-screen flex items-center justify-center p-4 sm:p-6">
        <div class="w-full max-w-4xl xl:max-w-6xl premium-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 animate-slide-up">
            <!-- Header Premium -->
            <header class="text-center mb-8 sm:mb-12">
                <div class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 mx-auto mb-4 sm:mb-6 rounded-full bg-gradient-to-br from-health-green-400 to-health-green-600 flex items-center justify-center shadow-xl sm:shadow-2xl">
                    <i class="ph-bold ph-paw-print text-2xl sm:text-3xl lg:text-4xl text-white"></i>
                </div>
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-800 mb-2 sm:mb-3 bg-gradient-to-r from-health-green-600 to-trust-blue-600 bg-clip-text text-transparent">
                    Carteira Pet Digital
                </h1>
                <p class="text-base sm:text-lg lg:text-xl text-slate-600 font-medium">Configure o perfil de sa√∫de digital do seu companheiro</p>
            </header>
            
            <div id="setup-form" class="space-y-6 sm:space-y-8 lg:space-y-10">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-10">
                    <!-- Tutor Card -->
                    <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 border-l-4 border-l-trust-blue-500">
                        <h2 class="text-lg sm:text-xl lg:text-2xl font-bold text-slate-800 mb-4 sm:mb-6 flex items-center">
                            <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-trust-blue-500 to-trust-blue-600 flex items-center justify-center mr-3 sm:mr-4 flex-shrink-0">
                                <i class="ph-bold ph-user text-white text-sm sm:text-lg"></i>
                            </div>
                            <span class="text-base sm:text-lg lg:text-xl">Suas Informa√ß√µes</span>
                        </h2>
                        <div class="space-y-4 sm:space-y-6">
                            <div>
                                <label for="tutor-nome" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Nome Completo</label>
                                <input type="text" id="tutor-nome" class="input-premium w-full text-base sm:text-lg" placeholder="Digite seu nome completo">
                            </div>
                            <div>
                                <label for="tutor-genero" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Pronome de tratamento</label>
                                <select id="tutor-genero" class="input-premium w-full text-base sm:text-lg">
                                    <option value="ela">Ela (feminino)</option>
                                    <option value="ele">Ele (masculino)</option>
                                    <option value="elu">Elu (neutro)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pet Card -->
                    <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 border-l-4 border-l-health-green-500">
                        <h2 class="text-lg sm:text-xl lg:text-2xl font-bold text-slate-800 mb-4 sm:mb-6 flex items-center">
                            <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-health-green-500 to-health-green-600 flex items-center justify-center mr-3 sm:mr-4 flex-shrink-0">
                                <i class="ph-bold ph-heart text-white text-sm sm:text-lg"></i>
                            </div>
                            <span class="text-base sm:text-lg lg:text-xl">Informa√ß√µes do Pet</span>
                        </h2>
                        <div class="space-y-4 sm:space-y-6">
                            <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6">
                                <div class="flex-1 w-full">
                                    <label for="pet-foto" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Foto do Pet</label>
                                    <input type="file" id="pet-foto" accept="image/*" 
                                           class="input-premium w-full text-sm sm:text-base lg:text-lg file:bg-gradient-to-r file:from-health-green-500 file:to-health-green-600 file:text-white file:border-0 file:px-3 file:py-2 file:rounded-lg file:font-semibold file:mr-3 hover:file:from-health-green-600 hover:file:to-health-green-700">
                                </div>
                                <div class="avatar-placeholder" id="avatar-container">
                                    <div id="dog-emoji">üêï</div>
                                    <img id="foto-preview" class="hidden w-full h-full object-cover rounded-full">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                <div>
                                    <label for="pet-nome" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Nome do Pet</label>
                                    <input type="text" id="pet-nome" class="input-premium w-full text-base sm:text-lg" placeholder="Nome do seu companheiro">
                                </div>
                                <div>
                                    <label for="pet-sexo" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Sexo</label>
                                    <select id="pet-sexo" class="input-premium w-full text-base sm:text-lg">
                                        <option value="macho">Macho</option>
                                        <option value="f√™mea">F√™mea</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label for="pet-apelidos" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Apelidos carinhosos</label>
                                <input type="text" id="pet-apelidos" class="input-premium w-full text-base sm:text-lg" placeholder="Docinho, Princesa, Campe√£o (separados por v√≠rgula)">
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                <div>
                                    <label for="pet-raca" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Ra√ßa</label>
                                    <input type="text" id="pet-raca" class="input-premium w-full text-base sm:text-lg" placeholder="Golden Retriever, SRD, etc.">
                                </div>
                                <div>
                                    <label for="pet-nascimento" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Data de Nascimento</label>
                                    <input type="date" id="pet-nascimento" class="input-premium w-full text-base sm:text-lg">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center pt-4 sm:pt-8">
                    <button onclick="salvarSetupInicial()" 
                            class="btn-premium py-3 sm:py-4 px-8 sm:px-12 rounded-xl sm:rounded-2xl text-lg sm:text-xl font-bold shadow-xl w-full sm:w-auto">
                        <i class="ph-bold ph-sparkle mr-2 sm:mr-3"></i>
                        Criar Carteira Digital
                        <i class="ph-bold ph-sparkle ml-2 sm:ml-3"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="hidden min-h-screen">
        <div class="container mx-auto p-3 sm:p-4 lg:p-6 xl:p-8 max-w-7xl">
            <!-- Header Premium -->
            <header class="premium-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 mb-4 sm:mb-6 lg:mb-8 shadow-xl sm:shadow-2xl">
                <div class="flex flex-col space-y-4 sm:space-y-6 lg:space-y-0 lg:flex-row lg:justify-between lg:items-center">
                    <div class="flex items-center space-x-3 sm:space-x-4">
                        <div class="w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-xl sm:rounded-2xl bg-gradient-to-br from-health-green-500 to-health-green-600 flex items-center justify-center shadow-lg flex-shrink-0">
                            <i class="ph-bold ph-heart-pulse text-lg sm:text-xl lg:text-2xl text-white"></i>
                        </div>
                        <div className="min-w-0">
                            <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-health-green-600 to-trust-blue-600 bg-clip-text text-transparent">
                                Carteira Digital
                            </h1>
                            <p id="dashboard-pet-nome" class="text-lg sm:text-xl lg:text-2xl font-semibold text-slate-600 truncate"></p>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-3 lg:space-x-4">
                        <button onclick="exportarPDF()" 
                                class="btn-premium py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg text-sm sm:text-base">
                            <i class="ph-bold ph-download-simple mr-2"></i>
                            Exportar PDF
                        </button>
                        <button onclick="resetarDados()" 
                                class="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl flex items-center justify-center transition-all shadow-lg text-sm sm:text-base">
                            <i class="ph-bold ph-trash mr-2"></i>
                            Resetar
                        </button>
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8">
                <!-- Sidebar Premium -->
                <aside class="lg:col-span-1 space-y-4 sm:space-y-6">
                    <!-- Pet Profile Card -->
                    <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6 text-center">
                        <div class="relative inline-block mb-3 sm:mb-4">
                            <div id="perfil-avatar-container" class="w-20 h-20 sm:w-24 sm:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-health-green-400 to-health-green-600 flex items-center justify-center text-3xl sm:text-4xl border-3 sm:border-4 border-white shadow-lg sm:shadow-xl mx-auto">
                                <div id="perfil-dog-emoji">üêï</div>
                                <img id="perfil-pet-foto" class="hidden w-full h-full object-cover rounded-full" alt="Foto do Pet">
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-health-green-500 to-health-green-600 rounded-full flex items-center justify-center shadow-lg">
                                <i class="ph-bold ph-check text-white text-xs sm:text-sm"></i>
                            </div>
                        </div>
                        <h2 id="perfil-pet-nome" class="text-lg sm:text-xl font-bold text-slate-800 mb-1"></h2>
                        <p id="perfil-pet-raca" class="text-slate-600 text-sm mb-2"></p>
                        <span id="perfil-pet-idade" class="inline-block bg-gradient-to-r from-slate-100 to-slate-200 px-3 py-1 rounded-full text-xs font-semibold text-slate-600"></span>
                    </div>

                    <!-- Health Progress Card -->
                    <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6">
                        <h3 class="font-bold text-slate-700 mb-3 sm:mb-4 flex items-center text-sm sm:text-base">
                            <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-r from-trust-blue-500 to-trust-blue-600 flex items-center justify-center mr-2 sm:mr-3 flex-shrink-0">
                                <i class="ph-bold ph-chart-line-up text-white text-xs sm:text-sm"></i>
                            </div>
                            Progresso de Sa√∫de
                        </h3>
                        <div class="space-y-3 sm:space-y-4">
                            <div>
                                <div class="flex justify-between text-xs sm:text-sm mb-2">
                                    <span class="font-medium text-slate-600">Vacinas Essenciais</span>
                                    <span id="progresso-texto" class="font-bold text-health-green-600">0%</span>
                                </div>
                                <div class="progress-premium">
                                    <div id="progresso-barra" style="width: 0%"></div>
                                </div>
                            </div>
                            <div id="dias-protecao" class="text-center p-3 bg-gradient-to-r from-health-green-50 to-health-green-100 rounded-lg sm:rounded-xl">
                                <div class="font-bold text-health-green-800 text-lg sm:text-xl" id="dias-numero">0</div>
                                <div class="text-xs text-health-green-600 font-medium">dias de prote√ß√£o</div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Tip Card -->
                    <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6 bg-gradient-to-br from-attention-orange-50 to-attention-orange-100 border-l-4 border-l-attention-orange-400">
                        <h3 class="font-bold text-attention-orange-800 mb-2 sm:mb-3 flex items-center text-sm sm:text-base">
                            <i class="ph-bold ph-lightbulb text-attention-orange-600 mr-2 flex-shrink-0"></i>
                            Dica de Cuidado
                        </h3>
                        <p id="dica-texto" class="text-attention-orange-700 text-xs sm:text-sm font-medium leading-relaxed"></p>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="lg:col-span-3">
                    <div class="premium-card rounded-xl sm:rounded-2xl overflow-hidden">
                        <!-- Premium Navigation -->
                        <nav class="border-b border-slate-100 px-3 sm:px-4 lg:px-6 py-3 sm:py-4">
                            <div class="flex space-x-1 sm:space-x-2">
                                <button onclick="changeTab('vacinas')" 
                                        class="tab-premium active flex items-center justify-center text-xs sm:text-sm lg:text-base">
                                    <i class="ph-bold ph-syringe mr-1 sm:mr-2 flex-shrink-0"></i>
                                    <span class="hidden sm:inline">Carteira de</span> Vacina√ß√£o
                                </button>
                                <button onclick="changeTab('informacoes')" 
                                        class="tab-premium text-slate-500 flex items-center justify-center text-xs sm:text-sm lg:text-base">
                                    <i class="ph-bold ph-gear mr-1 sm:mr-2 flex-shrink-0"></i>
                                    <span class="hidden sm:inline">Configura√ß√µes</span>
                                    <span class="sm:hidden">Config</span>
                                </button>
                            </div>
                        </nav>

                        <!-- Tab Content -->
                        <div class="p-3 sm:p-4 lg:p-6 xl:p-8">
                            <!-- Vaccines Tab -->
                            <div id="tab-vacinas" class="tab-content active">
                                <div class="mb-6 sm:mb-8">
                                    <h3 class="text-xl sm:text-2xl font-bold text-slate-800 mb-2">Cronograma de Vacina√ß√£o</h3>
                                    <p class="text-slate-600 text-sm sm:text-base">Mantenha a prote√ß√£o <span id="pronome-pet">do seu companheiro</span> sempre em dia</p>
                                </div>
                                <div id="tabela-vacinas" class="space-y-3 sm:space-y-4"></div>
                            </div>

                            <!-- Settings Tab -->
                            <div id="tab-informacoes" class="tab-content">
                                <div class="mb-6 sm:mb-8">
                                    <h3 class="text-xl sm:text-2xl font-bold text-slate-800 mb-2">Informa√ß√µes Adicionais</h3>
                                    <p class="text-slate-600 text-sm sm:text-base">Personalize o perfil <span id="pronome-pet-config">do seu companheiro</span></p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                                    <div>
                                        <label for="edit-pet-peso" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Peso atual (kg)</label>
                                        <input type="number" step="0.1" id="edit-pet-peso" class="input-premium w-full" placeholder="5.2">
                                    </div>
                                    <div>
                                        <label for="edit-pet-cor" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Cor predominante</label>
                                        <input type="text" id="edit-pet-cor" class="input-premium w-full" placeholder="Dourado com manchas brancas">
                                    </div>
                                    <div>
                                        <label for="edit-pet-rg" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">RG Pet / Microchip</label>
                                        <input type="text" id="edit-pet-rg" class="input-premium w-full" placeholder="SP123456789">
                                    </div>
                                    <div>
                                        <label for="edit-pet-comida" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Comida favorita</label>
                                        <input type="text" id="edit-pet-comida" class="input-premium w-full" placeholder="Ra√ß√£o premium, petiscos naturais">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label for="edit-pet-brinquedo" class="block text-sm font-bold text-slate-700 mb-2 sm:mb-3">Brinquedo favorito</label>
                                        <input type="text" id="edit-pet-brinquedo" class="input-premium w-full" placeholder="Bolinha de t√™nis amarela, corda de algod√£o">
                                    </div>
                                </div>
                                <div class="mt-6 sm:mt-8">
                                    <button onclick="salvarEdicoes()" 
                                            class="btn-premium py-2 sm:py-3 px-6 sm:px-8 rounded-lg sm:rounded-xl flex items-center w-full sm:w-auto justify-center">
                                        <i class="ph-bold ph-floppy-disk mr-2"></i>
                                        Cuidado registrado com carinho
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        
        <!-- Premium Footer -->
        <footer class="mt-8 sm:mt-12 pb-6 sm:pb-8">
            <div class="container mx-auto px-3 sm:px-6">
                <div class="premium-card rounded-xl sm:rounded-2xl p-4 sm:p-6 text-center">
                    <p class="text-xs sm:text-sm text-slate-500 leading-relaxed">
                        Este √© um projeto experimental em desenvolvimento por Bruno Goulart, Amanda Andrade e Nonato Davi. 
                        Se voc√™ recebeu este projeto para testes √© porque voc√™ √© importante para n√≥s.
                    </p>
                </div>
            </div>
        </footer>
        
        <!-- PDF Container -->
        <div id="carteira-pdf-container" class="fixed -top-full opacity-0 pointer-events-none"></div>
    </div>

    <script>
        const DB_KEY = 'petHealthDashboardData_mobile_v1';
        
        // Sistema inteligente de g√™neros
        const GENEROS = {
            tutor: {
                'ela': { pronome: 'ela', artigo: 'a', possessivo: 'sua' },
                'ele': { pronome: 'ele', artigo: 'o', possessivo: 'seu' },
                'elu': { pronome: 'elu', artigo: 'e', possessivo: 'sue' }
            },
            pet: {
                'macho': { pronome: 'ele', artigo: 'o', possessivo: 'seu' },
                'f√™mea': { pronome: 'ela', artigo: 'a', possessivo: 'sua' }
            }
        };
        
        const vacinasDB = [
            { id: 'v10_d1', nome: 'V8 ou V10 - Primeira Dose', idadeMinimaDias: 45, essencial: true, icon: 'syringe' },
            { id: 'v10_d2', nome: 'V8 ou V10 - Segunda Dose', idadeMinimaDias: 75, depende: 'v10_d1', essencial: true, icon: 'syringe' },
            { id: 'v10_d3', nome: 'V8 ou V10 - Terceira Dose', idadeMinimaDias: 105, depende: 'v10_d2', essencial: true, icon: 'syringe' },
            { id: 'v10_reforco', nome: 'V8 ou V10 - Refor√ßo Anual', idadeMinimaDias: 365, anual: true, icon: 'arrow-clockwise' },
            { id: 'antirrabica', nome: 'Antirr√°bica', idadeMinimaDias: 120, anual: true, essencial: true, icon: 'shield-check' },
            { id: 'gripe_d1', nome: 'Gripe Canina - Primeira Dose', idadeMinimaDias: 60, icon: 'thermometer' },
            { id: 'gripe_d2', nome: 'Gripe Canina - Segunda Dose', idadeMinimaDias: 81, depende: 'gripe_d1', icon: 'thermometer' },
            { id: 'giardia_d1', nome: 'Gi√°rdia - Primeira Dose', idadeMinimaDias: 60, icon: 'drop' },
            { id: 'giardia_d2', nome: 'Gi√°rdia - Segunda Dose', idadeMinimaDias: 81, depende: 'giardia_d1', icon: 'drop' },
        ];
        
        const dicasTemplate = [
            "Mantenha sempre √°gua fresca dispon√≠vel para hidrata√ß√£o",
            "Escove os dentes {pronome_pet} 2-3 vezes por semana", 
            "Verifique as patinhas ap√≥s cada passeio",
            "Mantenha {possessivo_pet} peso ideal com exerc√≠cios regulares",
            "Observe mudan√ßas de comportamento ou apetite",
            "A vacina√ß√£o em dia √© a melhor preven√ß√£o",
            "Passeios di√°rios fortalecem o v√≠nculo entre voc√™s",
            "Uma alimenta√ß√£o balanceada √© essencial para a sa√∫de"
        ];
        
        let appData = {};
        let fotoBase64 = null;

        // Inicializa√ß√£o
        window.onload = function() {
            const data = localStorage.getItem(DB_KEY);
            if (data) {
                try {
                    appData = JSON.parse(data);
                    showDashboard();
                } catch(e) {
                    showSetup();
                }
            } else {
                showSetup();
            }
            
            const fotoInput = document.getElementById('pet-foto');
            if (fotoInput) {
                fotoInput.addEventListener('change', handleFotoChange);
            }
        };

        // Fun√ß√µes auxiliares inteligentes
        function getPronouns() {
            if (!appData.tutor || !appData.pet) return { tutor: GENEROS.tutor.ela, pet: GENEROS.pet.macho };
            
            return {
                tutor: GENEROS.tutor[appData.tutor.genero] || GENEROS.tutor.ela,
                pet: GENEROS.pet[appData.pet.sexo] || GENEROS.pet.macho
            };
        }
        
        function aplicarInteligencia() {
            const pronouns = getPronouns();
            
            // Atualiza pronomes do pet na interface
            const pronounElements = document.querySelectorAll('[id*="pronome"]');
            pronounElements.forEach(el => {
                if (el.id.includes('pet')) {
                    el.textContent = `${pronouns.pet.artigo} ${appData.pet?.nome || 'seu companheiro'}`;
                }
            });
        }

        function handleFotoChange(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    fotoBase64 = e.target.result;
                    
                    // Setup screen preview
                    const preview = document.getElementById('foto-preview');
                    const dogEmoji = document.getElementById('dog-emoji');
                    
                    preview.src = fotoBase64;
                    preview.classList.remove('hidden');
                    dogEmoji.style.display = 'none';
                }
                reader.readAsDataURL(file);
            }
        }

        function showSetup() {
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('dashboard-screen').classList.add('hidden');
        }

        function showDashboard() {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('dashboard-screen').classList.remove('hidden');
            renderDashboard();
        }

        function salvarSetupInicial() {
            const tutorNome = document.getElementById('tutor-nome').value.trim();
            const petNome = document.getElementById('pet-nome').value.trim();
            const petNascimento = document.getElementById('pet-nascimento').value;

            if (!tutorNome || !petNome || !petNascimento) {
                alert('Por favor, preencha pelo menos o nome, nome do pet e data de nascimento.');
                return;
            }

            appData = {
                tutor: { 
                    nome: tutorNome,
                    genero: document.getElementById('tutor-genero').value
                },
                pet: {
                    nome: petNome,
                    apelidos: document.getElementById('pet-apelidos').value.trim(),
                    sexo: document.getElementById('pet-sexo').value,
                    nascimento: petNascimento,
                    raca: document.getElementById('pet-raca').value.trim(),
                    foto: fotoBase64,
                    peso: '', cor: '', rg: '', comida: '', brinquedo: '',
                    vacinasTomadas: []
                }
            };
            
            localStorage.setItem(DB_KEY, JSON.stringify(appData));
            showDashboard();
        }

        function renderDashboard() {
            if (!appData.pet) return;
            
            const { idadeEmDias, idadeString } = getPetIdade();
            
            // Aplica intelig√™ncia de g√™nero
            aplicarInteligencia();
            
            // Atualiza informa√ß√µes b√°sicas
            document.getElementById('dashboard-pet-nome').textContent = appData.pet.nome;
            document.getElementById('perfil-pet-nome').textContent = appData.pet.nome;
            document.getElementById('perfil-pet-raca').textContent = appData.pet.raca || 'Ra√ßa n√£o informada';
            document.getElementById('perfil-pet-idade').textContent = idadeString;
            
            // Foto do perfil com emoji fallback
            const perfilFoto = document.getElementById('perfil-pet-foto');
            const perfilEmoji = document.getElementById('perfil-dog-emoji');
            
            if (appData.pet.foto) {
                perfilFoto.src = appData.pet.foto;
                perfilFoto.classList.remove('hidden');
                perfilEmoji.style.display = 'none';
            } else {
                perfilFoto.classList.add('hidden');
                perfilEmoji.style.display = 'block';
            }

            // Preenche campos de edi√ß√£o
            document.getElementById('edit-pet-peso').value = appData.pet.peso || '';
            document.getElementById('edit-pet-cor').value = appData.pet.cor || '';
            document.getElementById('edit-pet-rg').value = appData.pet.rg || '';
            document.getElementById('edit-pet-comida').value = appData.pet.comida || '';
            document.getElementById('edit-pet-brinquedo').value = appData.pet.brinquedo || '';

            renderTabelaVacinas(idadeEmDias);
            renderProgresso();
            renderDica();
        }

        function renderTabelaVacinas(idadeEmDias) {
            const container = document.getElementById('tabela-vacinas');
            let html = '';

            vacinasDB.forEach((vacina, index) => {
                const { status, classe, data, elegivel } = getStatusVacina(vacina, idadeEmDias);
                const isChecked = appData.pet.vacinasTomadas.includes(vacina.id);
                
                html += `
                    <div class="vaccine-card">
                        <div class="flex items-center justify-between gap-3">
                            <div class="flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0">
                                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center flex-shrink-0">
                                    <i class="ph-bold ph-${vacina.icon} text-lg sm:text-xl text-slate-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold text-slate-800 text-sm sm:text-base lg:text-lg truncate">${vacina.nome}</h4>
                                    <p class="text-xs sm:text-sm text-slate-600 mt-1">${data}</p>
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row items-end sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 lg:space-x-4 flex-shrink-0">
                                <span class="status-badge ${classe} px-2 sm:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap">
                                    ${status}
                                </span>
                                <div class="checkbox-premium ${isChecked ? 'checked' : ''} ${!elegivel && !isChecked ? 'opacity-50 cursor-not-allowed' : ''}" 
                                     onclick="toggleVacina('${vacina.id}', ${elegivel || isChecked})">
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderProgresso() {
            const vacinasEssenciais = vacinasDB.filter(v => v.essencial);
            const vacinasTomadas = vacinasEssenciais.filter(v => appData.pet.vacinasTomadas.includes(v.id));
            const progresso = Math.round((vacinasTomadas.length / vacinasEssenciais.length) * 100);
            
            document.getElementById('progresso-texto').textContent = `${progresso}%`;
            
            const progressBar = document.getElementById('progresso-barra');
            progressBar.style.width = `${progresso}%`;
            
            // Calcula dias de prote√ß√£o (aproximado)
            const { idadeEmDias } = getPetIdade();
            const diasProtecao = Math.max(0, idadeEmDias - 45) * (progresso / 100);
            document.getElementById('dias-numero').textContent = Math.round(diasProtecao);
        }

        function renderDica() {
            const pronouns = getPronouns();
            const template = dicasTemplate[Math.floor(Math.random() * dicasTemplate.length)];
            
            const dica = template
                .replace('{pronome_pet}', pronouns.pet.pronome)
                .replace('{possessivo_pet}', pronouns.pet.possessivo);
            
            document.getElementById('dica-texto').textContent = dica;
        }

        function getPetIdade() {
            if (!appData.pet.nascimento) return { idadeEmDias: 0, idadeString: 'Idade n√£o informada' };
            
            const hoje = new Date();
            const nascimento = new Date(appData.pet.nascimento);
            const diffTempo = Math.abs(hoje.getTime() - nascimento.getTime());
            const idadeEmDias = Math.ceil(diffTempo / (1000 * 3600 * 24));
            
            let idadeString;
            if (idadeEmDias < 30) {
                idadeString = `${idadeEmDias} dias`;
            } else if (idadeEmDias < 365) {
                const meses = Math.floor(idadeEmDias / 30);
                idadeString = `${meses} ${meses === 1 ? 'm√™s' : 'meses'}`;
            } else {
                const anos = Math.floor(idadeEmDias / 365);
                const meses = Math.floor((idadeEmDias % 365) / 30);
                idadeString = `${anos} ${anos === 1 ? 'ano' : 'anos'}${meses > 0 ? ` e ${meses} ${meses === 1 ? 'm√™s' : 'meses'}` : ''}`;
            }
            return { idadeEmDias, idadeString };
        }

        function getStatusVacina(vacina, idadePet) {
            const tomadas = new Set(appData.pet.vacinasTomadas);
            
            if (tomadas.has(vacina.id)) {
                return { 
                    status: 'Aplicada', 
                    classe: 'status-complete', 
                    data: 'Prote√ß√£o ativa', 
                    elegivel: true
                };
            }
            
            if (vacina.depende && !tomadas.has(vacina.depende)) {
                return { 
                    status: 'Aguardando', 
                    classe: 'status-waiting', 
                    data: 'Aguarda dose anterior', 
                    elegivel: false
                };
            }
            
            if (idadePet >= vacina.idadeMinimaDias) {
                return { 
                    status: 'Pendente', 
                    classe: 'status-pending', 
                    data: 'Recomendada agora', 
                    elegivel: true
                };
            } else {
                const diasRestantes = vacina.idadeMinimaDias - idadePet;
                return { 
                    status: 'Em breve', 
                    classe: 'status-future', 
                    data: `Em ${diasRestantes} dias`, 
                    elegivel: false
                };
            }
        }

        function toggleVacina(vacinaId, elegivel) {
            if (!elegivel) return;
            
            const index = appData.pet.vacinasTomadas.indexOf(vacinaId);
            if (index > -1) {
                appData.pet.vacinasTomadas.splice(index, 1);
            } else {
                appData.pet.vacinasTomadas.push(vacinaId);
            }
            localStorage.setItem(DB_KEY, JSON.stringify(appData));
            renderDashboard();
        }

        function salvarEdicoes() {
            appData.pet.peso = document.getElementById('edit-pet-peso').value;
            appData.pet.cor = document.getElementById('edit-pet-cor').value;
            appData.pet.rg = document.getElementById('edit-pet-rg').value;
            appData.pet.comida = document.getElementById('edit-pet-comida').value;
            appData.pet.brinquedo = document.getElementById('edit-pet-brinquedo').value;
            
            localStorage.setItem(DB_KEY, JSON.stringify(appData));
            
            // Feedback visual premium
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="ph-bold ph-check mr-2"></i>Salvo com carinho!';
            btn.classList.add('bg-gradient-to-r', 'from-health-green-500', 'to-health-green-600');
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.classList.remove('from-health-green-500', 'to-health-green-600');
            }, 2000);
            
            renderDashboard();
        }

        function resetarDados() {
            if (confirm('Tem certeza que deseja apagar todos os dados? Esta a√ß√£o n√£o pode ser desfeita.')) {
                localStorage.removeItem(DB_KEY);
                window.location.reload();
            }
        }

        function changeTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-premium').forEach(el => {
                el.classList.remove('active');
                el.classList.add('text-slate-500');
            });
            
            document.getElementById(`tab-${tabName}`).classList.add('active');
            const button = document.querySelector(`button[onclick="changeTab('${tabName}')"]`);
            button.classList.add('active');
            button.classList.remove('text-slate-500');
        }

        async function exportarPDF() {
            try {
                const btn = event.target;
                const originalContent = btn.innerHTML;
                btn.innerHTML = '<div class="shimmer w-4 h-4 rounded mr-2"></div>Gerando PDF...';
                btn.disabled = true;
                
                const { jsPDF } = window.jspdf;
                const container = document.getElementById('carteira-pdf-container');
                const { idadeEmDias, idadeString } = getPetIdade();
                
                let tabelaVacinas = '';
                vacinasDB.forEach(vacina => {
                    const isChecked = appData.pet.vacinasTomadas.includes(vacina.id);
                    const status = isChecked ? '‚úì Aplicada' : '‚óã Pendente';
                    
                    tabelaVacinas += `
                        <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e2e8f0;">
                            <span style="font-weight: 500;">${vacina.nome}</span>
                            <span style="font-weight: 700; color: ${isChecked ? '#166534' : '#9a3412'};">${status}</span>
                        </div>
                    `;
                });
                
                // Create avatar for PDF
                const avatarForPdf = appData.pet.foto || 'data:image/svg+xml;base64,' + btoa(`
                    <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#86efac;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="60" cy="60" r="60" fill="url(#grad)"/>
                        <text x="60" y="75" font-family="system-ui" font-size="48" text-anchor="middle" fill="white">üêï</text>
                    </svg>
                `);
                
                const pdfContent = `
                    <div style="padding: 2rem; background: white; font-family: Inter, sans-serif; width: 800px; line-height: 1.6;">
                        <div style="text-align: center; border-bottom: 3px solid #22c55e; padding-bottom: 2rem; margin-bottom: 2rem;">
                            <h1 style="font-size: 2.5rem; font-weight: 800; color: #22c55e; margin: 0;">Carteira Pet Digital</h1>
                            <p style="font-size: 1.5rem; font-weight: 600; color: #475569; margin: 0.5rem 0 0 0;">${appData.pet.nome}</p>
                        </div>
                        
                        <div style="display: flex; gap: 2rem; margin-bottom: 3rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); padding: 2rem; border-radius: 1rem;">
                            <img src="${avatarForPdf}" 
                                 style="width: 140px; height: 140px; border-radius: 50%; object-fit: cover; border: 4px solid #22c55e; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <div style="flex-grow: 1;">
                                <h2 style="font-size: 2rem; font-weight: 800; color: #1f2937; margin: 0 0 1rem 0;">${appData.pet.nome}</h2>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; font-size: 1rem;">
                                    <p style="margin: 0;"><strong>Respons√°vel:</strong> ${appData.tutor.nome}</p>
                                    <p style="margin: 0;"><strong>Idade:</strong> ${idadeString}</p>
                                    <p style="margin: 0;"><strong>Ra√ßa:</strong> ${appData.pet.raca || 'N√£o informada'}</p>
                                    <p style="margin: 0;"><strong>Sexo:</strong> ${appData.pet.sexo}</p>
                                    ${appData.pet.peso ? `<p style="margin: 0;"><strong>Peso:</strong> ${appData.pet.peso} kg</p>` : ''}
                                    ${appData.pet.cor ? `<p style="margin: 0;"><strong>Cor:</strong> ${appData.pet.cor}</p>` : ''}
                                </div>
                                ${appData.pet.rg ? `<p style="margin: 1rem 0 0 0;"><strong>Registro:</strong> ${appData.pet.rg}</p>` : ''}
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 3rem;">
                            <h3 style="font-size: 1.5rem; font-weight: 800; color: #374151; margin: 0 0 1.5rem 0; text-align: center;">Carteira de Vacina√ß√£o</h3>
                            <div style="background: white; border: 2px solid #e5e7eb; border-radius: 1rem; overflow: hidden;">
                                <div style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 1.5rem; text-align: center;">
                                    <strong style="font-size: 1.2rem;">Registro de Vacinas</strong>
                                </div>
                                <div style="padding: 0 1.5rem;">
                                    ${tabelaVacinas}
                                </div>
                            </div>
                        </div>
                        
                        ${(appData.pet.comida || appData.pet.brinquedo) ? `
                        <div style="background: linear-gradient(135deg, #fff7ed, #fed7aa); padding: 1.5rem; border-radius: 1rem; margin-bottom: 2rem;">
                            <h3 style="font-size: 1.2rem; font-weight: 700; color: #9a3412; margin: 0 0 1rem 0;">Prefer√™ncias</h3>
                            ${appData.pet.comida ? `<p style="margin: 0 0 0.5rem 0;"><strong>Comida favorita:</strong> ${appData.pet.comida}</p>` : ''}
                            ${appData.pet.brinquedo ? `<p style="margin: 0;"><strong>Brinquedo favorito:</strong> ${appData.pet.brinquedo}</p>` : ''}
                        </div>
                        ` : ''}
                        
                        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 2px solid #e5e7eb; text-align: center; color: #6b7280;">
                            <p style="margin: 0; font-size: 0.9rem; line-height: 1.5;">
                                Este √© um projeto experimental em desenvolvimento por Bruno Goulart, Amanda Andrade e Nonato Davi.<br>
                                Se voc√™ recebeu este projeto para testes √© porque voc√™ √© importante para n√≥s.
                            </p>
                            <p style="margin: 1rem 0 0 0; font-size: 0.8rem;">Documento gerado em ${new Date().toLocaleDateString('pt-BR')}</p>
                        </div>
                    </div>
                `;
                
                container.innerHTML = pdfContent;
                container.style.position = 'fixed';
                container.style.top = '0';
                container.style.left = '0';
                container.style.opacity = '1';
                container.style.zIndex = '-1000';
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const canvas = await html2canvas(container.querySelector('div'), { 
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff'
                });
                
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgData = canvas.toDataURL('image/png');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const ratio = canvas.width / canvas.height;
                
                let imgWidth = pdfWidth;
                let imgHeight = imgWidth / ratio;
                
                if (imgHeight > pdfHeight) {
                    imgHeight = pdfHeight;
                    imgWidth = imgHeight * ratio;
                }
                
                const x = (pdfWidth - imgWidth) / 2;
                const y = (pdfHeight - imgHeight) / 2;
                
                pdf.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);
                pdf.save(`carteira_${appData.pet.nome.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`);
                
                container.innerHTML = '';
                container.style.position = 'fixed';
                container.style.top = '-9999px';
                container.style.opacity = '0';
                
                btn.innerHTML = '<i class="ph-bold ph-check mr-2"></i>PDF Salvo!';
                setTimeout(() => {
                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                }, 2000);
                
            } catch (error) {
                console.error('Erro:', error);
                btn.innerHTML = originalContent;
                btn.disabled = false;
                alert('Erro ao gerar PDF. Tente novamente.');
            }
        }
    </script>
</body>
</html>
